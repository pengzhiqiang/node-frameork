!function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return n[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var e={};t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){const r=e(!function(){var n=new Error('Cannot find module "../service/portalService"');throw n.code="MODULE_NOT_FOUND",n}()),i=e(2);e(!function(){var n=new Error('Cannot find module "../lib/Funcs"');throw n.code="MODULE_NOT_FOUND",n}());n.exports=(n=>{n.get("/",(n,t)=>{let e=n.query,o=e.openId||"",u=e.userNo||"";i.parallel([t=>{r.getAllcoupons(n,{qs:{openId:o,page:1,pageSize:6}},(n,e)=>{t(n,e)})},t=>{r.getCouonsByUser(n,{qs:{openId:o,userNo:u}},(n,e)=>{t(n,e)})},t=>{r.getCouponAmount(n,{qs:{openId:o}},(n,e)=>{t(n,e)})}],(n,e)=>{if(n)console.log(n);else{let n={};try{n.allCoupons=JSON.parse(e[0]),n.couponsByUser=JSON.parse(e[1]),n.couponAmount=JSON.parse(e[2]),t.render("index.dust",n)}catch(n){console.log(n)}}})})})},,function(n,t,e){var r,i;(function(e,o,u){!function(){function c(){}function a(n){return n}function f(n){return!!n}function l(n){return!n}function s(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function p(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}function h(n){return H(n)||"number"==typeof n.length&&n.length>=0&&n.length%1==0}function m(n,t){for(var e=-1,r=n.length;++e<r;)t(n[e],e,n)}function d(n,t){for(var e=-1,r=n.length,i=Array(r);++e<r;)i[e]=t(n[e],e,n);return i}function y(n){return d(Array(n),function(n,t){return t})}function v(n,t,e){return m(n,function(n,r,i){e=t(e,n,r,i)}),e}function g(n,t){m($(n),function(e){t(n[e],e)})}function w(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function k(n){var t,e,r=-1;return h(n)?(t=n.length,function(){return++r<t?r:null}):(e=$(n),t=e.length,function(){return++r<t?e[r]:null})}function T(n,t){return t=null==t?n.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),r=Array(e),i=0;i<e;i++)r[i]=arguments[i+t];switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r)}}}function b(n){return function(t,e,r){return n(t,r)}}function O(n){return function(t,e,r){r=p(r||c);var i=k(t=t||[]);if(n<=0)return r(null);var o=!1,u=0,a=!1;!function c(){if(o&&u<=0)return r(null);for(;u<n&&!a;){var f=i();if(null===f)return o=!0,void(u<=0&&r(null));u+=1,e(t[f],f,s(function(n){u-=1,n?(r(n),a=!0):c()}))}}()}}function I(n){return function(t,e,r){return n(D.eachOf,t,e,r)}}function E(n){return function(t,e,r,i){return n(O(e),t,r,i)}}function S(n){return function(t,e,r){return n(D.eachOfSeries,t,e,r)}}function x(n,t,e,r){r=p(r||c);var i=h(t=t||[])?[]:{};n(t,function(n,t,r){e(n,function(n,e){i[t]=e,r(n)})},function(n){r(n,i)})}function L(n,t,e,r){var i=[];n(t,function(n,t,r){e(n,function(e){e&&i.push({index:t,value:n}),r()})},function(){r(d(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function j(n,t,e,r){L(n,t,function(n,t){e(n,function(n){t(!n)})},r)}function _(n,t,e){return function(r,i,o,u){function c(){u&&u(e(!1,void 0))}function a(n,r,i){if(!u)return i();o(n,function(r){u&&t(r)&&(u(e(!0,n)),u=o=!1),i()})}arguments.length>3?n(r,i,a,c):(u=o,o=i,n(r,a,c))}}function A(n,t){return t}function C(n,t,e){e=e||c;var r=h(t)?[]:{};n(t,function(n,t,e){n(T(function(n,i){i.length<=1&&(i=i[0]),r[t]=i,e(n)}))},function(n){e(n,r)})}function M(n,t,e,r){var i=[];n(t,function(n,t,r){e(n,function(n,t){i=i.concat(t||[]),r(n)})},function(n){r(n,i)})}function N(n,t,e){function r(n,t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,H(t)||(t=[t]),0===t.length&&n.idle())return D.setImmediate(function(){n.drain()});m(t,function(t){var i={data:t,callback:r||c};e?n.tasks.unshift(i):n.tasks.push(i),n.tasks.length===n.concurrency&&n.saturated()}),D.setImmediate(n.process)}function i(n,t){return function(){o-=1;var e=!1,r=arguments;m(t,function(n){m(u,function(t,r){t!==n||e||(u.splice(r,1),e=!0)}),n.callback.apply(n,r)}),n.tasks.length+o===0&&n.drain(),n.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var o=0,u=[],a={tasks:[],concurrency:t,payload:e,saturated:c,empty:c,drain:c,started:!1,paused:!1,push:function(n,t){r(a,n,!1,t)},kill:function(){a.drain=c,a.tasks=[]},unshift:function(n,t){r(a,n,!0,t)},process:function(){for(;!a.paused&&o<a.concurrency&&a.tasks.length;){var t=a.payload?a.tasks.splice(0,a.payload):a.tasks.splice(0,a.tasks.length),e=d(t,function(n){return n.data});0===a.tasks.length&&a.empty(),o+=1,u.push(t[0]);var r=s(i(a,t));n(e,r)}},length:function(){return a.tasks.length},running:function(){return o},workersList:function(){return u},idle:function(){return a.tasks.length+o===0},pause:function(){a.paused=!0},resume:function(){if(!1!==a.paused){a.paused=!1;for(var n=Math.min(a.concurrency,a.tasks.length),t=1;t<=n;t++)D.setImmediate(a.process)}}};return a}function q(n){return T(function(t,e){t.apply(null,e.concat([T(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&m(e,function(t){console[n](t)}))})]))})}function F(n){return function(t,e,r){n(y(t),e,r)}}function U(n){return T(function(t,e){var r=T(function(e){var r=this,i=e.pop();return n(t,function(n,t,i){n.apply(r,e.concat([i]))},i)});return e.length?r.apply(this,e):r})}function z(n){return T(function(t){var e=t.pop();t.push(function(){var n=arguments;r?D.setImmediate(function(){e.apply(null,n)}):e.apply(null,n)});var r=!0;n.apply(this,t),r=!1})}var P,D={},B="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this;null!=B&&(P=B.async),D.noConflict=function(){return B.async=P,D};var J=Object.prototype.toString,H=Array.isArray||function(n){return"[object Array]"===J.call(n)},W=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},$=Object.keys||function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t},Q="function"==typeof o&&o,R=Q?function(n){Q(n)}:function(n){setTimeout(n,0)};"object"==typeof u&&"function"==typeof u.nextTick?D.nextTick=u.nextTick:D.nextTick=R,D.setImmediate=Q?R:D.nextTick,D.forEach=D.each=function(n,t,e){return D.eachOf(n,b(t),e)},D.forEachSeries=D.eachSeries=function(n,t,e){return D.eachOfSeries(n,b(t),e)},D.forEachLimit=D.eachLimit=function(n,t,e,r){return O(t)(n,b(e),r)},D.forEachOf=D.eachOf=function(n,t,e){e=p(e||c);for(var r,i=k(n=n||[]),o=0;null!=(r=i());)o+=1,t(n[r],r,s(function(n){o--,n?e(n):null===r&&o<=0&&e(null)}));0===o&&e(null)},D.forEachOfSeries=D.eachOfSeries=function(n,t,e){function r(){var u=!0;if(null===o)return e(null);t(n[o],o,s(function(n){if(n)e(n);else{if(null===(o=i()))return e(null);u?D.setImmediate(r):r()}})),u=!1}e=p(e||c);var i=k(n=n||[]),o=i();r()},D.forEachOfLimit=D.eachOfLimit=function(n,t,e,r){O(t)(n,e,r)},D.map=I(x),D.mapSeries=S(x),D.mapLimit=E(x),D.inject=D.foldl=D.reduce=function(n,t,e,r){D.eachOfSeries(n,function(n,r,i){e(t,n,function(n,e){t=e,i(n)})},function(n){r(n,t)})},D.foldr=D.reduceRight=function(n,t,e,r){var i=d(n,a).reverse();D.reduce(i,t,e,r)},D.transform=function(n,t,e,r){3===arguments.length&&(r=e,e=t,t=H(n)?[]:{}),D.eachOf(n,function(n,r,i){e(t,n,r,i)},function(n){r(n,t)})},D.select=D.filter=I(L),D.selectLimit=D.filterLimit=E(L),D.selectSeries=D.filterSeries=S(L),D.reject=I(j),D.rejectLimit=E(j),D.rejectSeries=S(j),D.any=D.some=_(D.eachOf,f,a),D.someLimit=_(D.eachOfLimit,f,a),D.all=D.every=_(D.eachOf,l,l),D.everyLimit=_(D.eachOfLimit,l,l),D.detect=_(D.eachOf,a,A),D.detectSeries=_(D.eachOfSeries,a,A),D.detectLimit=_(D.eachOfLimit,a,A),D.sortBy=function(n,t,e){function r(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0}D.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);e(null,d(t.sort(r),function(n){return n.value}))})},D.auto=function(n,t,e){function r(n){h.unshift(n)}function i(n){var t=w(h,n);t>=0&&h.splice(t,1)}function o(){a--,m(h.slice(0),function(n){n()})}"function"==typeof arguments[1]&&(e=t,t=null),e=p(e||c);var u=$(n),a=u.length;if(!a)return e(null);t||(t=a);var f={},l=0,s=!1,h=[];r(function(){a||e(null,f)}),m(u,function(u){function c(){return l<t&&v(d,function(n,t){return n&&f.hasOwnProperty(t)},!0)&&!f.hasOwnProperty(u)}function a(){c()&&(l++,i(a),h[h.length-1](m,f))}if(!s){for(var p,h=H(n[u])?n[u]:[n[u]],m=T(function(n,t){if(l--,t.length<=1&&(t=t[0]),n){var r={};g(f,function(n,t){r[t]=n}),r[u]=t,s=!0,e(n,r)}else f[u]=t,D.setImmediate(o)}),d=h.slice(0,h.length-1),y=d.length;y--;){if(!(p=n[d[y]]))throw new Error("Has nonexistent dependency in "+d.join(", "));if(H(p)&&w(p,u)>=0)throw new Error("Has cyclic dependencies")}c()?(l++,h[h.length-1](m,f)):r(a)}})},D.retry=function(n,t,e){function r(n,t){for(;c.times;){var e=!(c.times-=1);u.push(function(n,e){return function(r){n(function(n,t){r(!n||e,{err:n,result:t})},t)}}(c.task,e)),!e&&c.interval>0&&u.push(function(n){return function(t){setTimeout(function(){t(null)},n)}}(c.interval))}D.series(u,function(t,e){e=e[e.length-1],(n||c.callback)(e.err,e.result)})}var i=5,o=0,u=[],c={times:i,interval:o},a=arguments.length;if(a<1||a>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return a<=2&&"function"==typeof n&&(e=t,t=n),"function"!=typeof n&&function(n,t){if("number"==typeof t)n.times=parseInt(t,10)||i;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);n.times=parseInt(t.times,10)||i,n.interval=parseInt(t.interval,10)||o}}(c,n),c.callback=e,c.task=t,c.callback?r():r},D.waterfall=function(n,t){function e(n){return T(function(r,i){if(r)t.apply(null,[r].concat(i));else{var o=n.next();o?i.push(e(o)):i.push(t),z(n).apply(null,i)}})}if(t=p(t||c),!H(n)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!n.length)return t();e(D.iterator(n))()},D.parallel=function(n,t){C(D.eachOf,n,t)},D.parallelLimit=function(n,t,e){C(O(t),n,e)},D.series=function(n,t){C(D.eachOfSeries,n,t)},D.iterator=function(n){function t(e){function r(){return n.length&&n[e].apply(null,arguments),r.next()}return r.next=function(){return e<n.length-1?t(e+1):null},r}return t(0)},D.apply=T(function(n,t){return T(function(e){return n.apply(null,t.concat(e))})}),D.concat=I(M),D.concatSeries=S(M),D.whilst=function(n,t,e){if(e=e||c,n()){var r=T(function(i,o){i?e(i):n.apply(this,o)?t(r):e.apply(null,[null].concat(o))});t(r)}else e(null)},D.doWhilst=function(n,t,e){var r=0;return D.whilst(function(){return++r<=1||t.apply(this,arguments)},n,e)},D.until=function(n,t,e){return D.whilst(function(){return!n.apply(this,arguments)},t,e)},D.doUntil=function(n,t,e){return D.doWhilst(n,function(){return!t.apply(this,arguments)},e)},D.during=function(n,t,e){e=e||c;var r=T(function(t,r){t?e(t):(r.push(i),n.apply(this,r))}),i=function(n,i){n?e(n):i?t(r):e(null)};n(i)},D.doDuring=function(n,t,e){var r=0;D.during(function(n){r++<1?n(null,!0):t.apply(this,arguments)},n,e)},D.queue=function(n,t){return N(function(t,e){n(t[0],e)},t,1)},D.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}function r(n,t,e){for(var r=-1,i=n.length-1;r<i;){var o=r+(i-r+1>>>1);e(t,n[o])>=0?r=o:i=o-1}return r}function i(n,t,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(n.started=!0,H(t)||(t=[t]),0===t.length)return D.setImmediate(function(){n.drain()});m(t,function(t){var u={data:t,priority:i,callback:"function"==typeof o?o:c};n.tasks.splice(r(n.tasks,u,e)+1,0,u),n.tasks.length===n.concurrency&&n.saturated(),D.setImmediate(n.process)})}var o=D.queue(n,t);return o.push=function(n,t,e){i(o,n,t,e)},delete o.unshift,o},D.cargo=function(n,t){return N(n,1,t)},D.log=q("log"),D.dir=q("dir"),D.memoize=function(n,t){var e={},r={},i=Object.prototype.hasOwnProperty;t=t||a;var o=T(function(o){var u=o.pop(),c=t.apply(null,o);i.call(e,c)?D.setImmediate(function(){u.apply(null,e[c])}):i.call(r,c)?r[c].push(u):(r[c]=[u],n.apply(null,o.concat([T(function(n){e[c]=n;var t=r[c];delete r[c];for(var i=0,o=t.length;i<o;i++)t[i].apply(null,n)})])))});return o.memo=e,o.unmemoized=n,o},D.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},D.times=F(D.map),D.timesSeries=F(D.mapSeries),D.timesLimit=function(n,t,e,r){return D.mapLimit(y(n),t,e,r)},D.seq=function(){var n=arguments;return T(function(t){var e=this,r=t[t.length-1];"function"==typeof r?t.pop():r=c,D.reduce(n,t,function(n,t,r){t.apply(e,n.concat([T(function(n,t){r(n,t)})]))},function(n,t){r.apply(e,[n].concat(t))})})},D.compose=function(){return D.seq.apply(null,Array.prototype.reverse.call(arguments))},D.applyEach=U(D.eachOf),D.applyEachSeries=U(D.eachOfSeries),D.forever=function(n,t){function e(n){if(n)return r(n);i(e)}var r=s(t||c),i=z(n);e()},D.ensureAsync=z,D.constant=T(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),D.wrapSync=D.asyncify=function(n){return T(function(t){var e,r=t.pop();try{e=n.apply(this,t)}catch(n){return r(n)}W(e)&&"function"==typeof e.then?e.then(function(n){r(null,n)}).catch(function(n){r(n.message?n:new Error(n))}):r(null,e)})},"object"==typeof n&&n.exports?n.exports=D:(r=[],void 0!==(i=function(){return D}.apply(t,r))&&(n.exports=i))}()}).call(t,function(){return this}(),e(3).setImmediate,e(5))},function(n,t,e){function r(n,t){this._id=n,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(n){n&&n.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(n,t){clearTimeout(n._idleTimeoutId),n._idleTimeout=t},t.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},t._unrefActive=t.active=function(n){clearTimeout(n._idleTimeoutId);var t=n._idleTimeout;t>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},t))},e(4),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(n,t,e){(function(n,t){!function(n,e){"use strict";function r(n){delete a[n]}function i(n){var t=n.callback,r=n.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(e,r)}}function o(n){if(f)setTimeout(o,0,n);else{var t=a[n];if(t){f=!0;try{i(t)}finally{r(n),f=!1}}}}if(!n.setImmediate){var u,c=1,a={},f=!1,l=n.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(n);s=s&&s.setTimeout?s:n,"[object process]"==={}.toString.call(n.process)?u=function(n){t.nextTick(function(){o(n)})}:function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?function(){var t="setImmediate$"+Math.random()+"$",e=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(t)&&o(+e.data.slice(t.length))};n.addEventListener?n.addEventListener("message",e,!1):n.attachEvent("onmessage",e),u=function(e){n.postMessage(t+e,"*")}}():n.MessageChannel?function(){var n=new MessageChannel;n.port1.onmessage=function(n){o(n.data)},u=function(t){n.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var n=l.documentElement;u=function(t){var e=l.createElement("script");e.onreadystatechange=function(){o(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}}():u=function(n){setTimeout(o,0,n)},s.setImmediate=function(n){"function"!=typeof n&&(n=new Function(""+n));for(var t=new Array(arguments.length-1),e=0;e<t.length;e++)t[e]=arguments[e+1];var r={callback:n,args:t};return a[c]=r,u(c),c++},s.clearImmediate=r}}("undefined"==typeof self?void 0===n?this:n:self)}).call(t,function(){return this}(),e(5))},function(n,t){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(n){if(l===setTimeout)return setTimeout(n,0);if((l===e||!l)&&setTimeout)return l=setTimeout,setTimeout(n,0);try{return l(n,0)}catch(t){try{return l.call(null,n,0)}catch(t){return l.call(this,n,0)}}}function o(n){if(s===clearTimeout)return clearTimeout(n);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(n);try{return s(n)}catch(t){try{return s.call(null,n)}catch(t){return s.call(this,n)}}}function u(){d&&h&&(d=!1,h.length?m=h.concat(m):y=-1,m.length&&c())}function c(){if(!d){var n=i(u);d=!0;for(var t=m.length;t;){for(h=m,m=[];++y<t;)h&&h[y].run();y=-1,t=m.length}h=null,d=!1,o(n)}}function a(n,t){this.fun=n,this.array=t}function f(){}var l,s,p=n.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:e}catch(n){l=e}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(n){s=r}}();var h,m=[],d=!1,y=-1;p.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];m.push(new a(n,t)),1!==m.length||d||i(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.prependListener=f,p.prependOnceListener=f,p.listeners=function(n){return[]},p.binding=function(n){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(n){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}}]);