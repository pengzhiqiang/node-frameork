!function(e){function t(a){if(o[a])return o[a].exports;var n=o[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){function a(e,t){var o=e.data("id"),a=n.opay8.getCookie("openId");$.ajax({type:"get",url:"/cgi/addCoupon",data:{openId:a,couponId:o},success:t})}var n=o(1);n.opay8.setHtmlFonts();new Swiper(".swiper-container",{pagination:".swiper-pagination",slidesPerView:2.15,paginationClickable:!0,freeMode:!0});var i=n.opay8.getQueryString("openId");i&&n.opay8.setCookie("openId",i),$(".swiper-slide").on("click",function(e){e.stopPropagation();var t=$(this);a(t,function(e){var o=JSON.parse(e);0==o.code?(n.opay8.toast("领取成功！"),t.find(".coupon-btn-new").addClass("YES").removeClass("NO"),t.find(".coupon-btn-new").html("已领取,买单使用")):n.opay8.toast(o.msg)})}),$(".store-list").on("click",".a-right-btn",function(e){e.stopPropagation();var t=$(this);if(t.hasClass("YES")){var o="http://apis.map.qq.com/tools/routeplan/eword="+t.data("addr")+"?referer=opay8&key=MIRBZ-WCFW6-IBQS5-ERJQD-RAAAS-32FB2";location.href=o}else a(t,function(e){var o=JSON.parse(e);0==o.code?(n.opay8.toast("领取成功！"),t.addClass("YES").removeClass("NO"),t.html("立即使用")):n.opay8.toast(o.msg)})});var s=2;$(".get-more-btn").on("click",function(){var e=n.opay8.getCookie("openId");$.ajax({type:"get",url:"/cgi/changeCouponList",data:{page:s,openId:e},success:function(e){s++;var t=JSON.parse(e);if(0==t.code){var o=t.data.pageData;if(o.length>0){var a="";for(var i in o){var r=n.opay8.cutTime(o[i].endTimeStr),p=n.opay8.ifString(o[i].isGet,"NO","立即领取","立即使用"),c=n.opay8.ifString(o[i].isGet,"YES","YES","NO"),d=n.opay8.ifString(o[i].couponType,"DISCOUNT","折扣券","现金券");a+='<a href="javascript:void(0)" ><div class="a-left"><span class="discount">'+n.opay8.ifString(o[i].couponType,"DISCOUNT",o[i].amount+"<small>折</small>","<small>￥</small>"+o[i].amount)+'</span><span class="couponType">'+d+'</span></div><div class="a-mid"><div class="name">'+o[i].userName+'</div><div class="tips">'+o[i].couponName+'</div></div><div class="a-right"><div class="a-right-btn '+c+'" data-addr="'+o[i].userAddress+'" data-id="'+o[i].couponId+'">'+p+'</div><div class="a-right-endtime">效期至'+r+"</div></div></a>"}$(".store-list").append(a)}else n.opay8.toast("暂无更多"),$(".get-more-btn").css({display:"none"})}else n.opay8.toast("请求失败")}})}),$(".share-mask").on("click",function(){$(this).css("display","none")})},function(e,t){e.exports={opay8:{setHtmlFonts:function(){var e=document.documentElement.clientWidth;e>640&&(e=640),document.documentElement.style.fontSize=e/7.5+"px"},setCookie:function(e,t,o,a){var n=new Date;return n.setTime(n.getTime()+864e5),document.cookie=e+"="+t+"; expires="+n.toGMTString()+"; "+(a?"path="+a+"; ":"path=/; ")+(o?"domain="+o+";":"domain="+document.location.hostname+";"),!0},getCookie:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),o=document.cookie.match(t);return o?o[1]:""},delCookie:function(e,t,o){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(o?"path="+o+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+document.location.hostname+";")},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(t);return null!=o?o[2]:null},toast:function(e,t){if(null===document.querySelector(".toast")){var o=$('<p class="toast">'+e+"</p>").appendTo($("body"));return setTimeout(function(){o.remove()},t||1e3),o}},cutTime:function(e){return e.split(" ")[0]},ifString:function(e,t,o,a){return e==t?o:a},netType:function(e,t){var o=navigator.userAgent;if(o){var a=o.match(/NetType.*\s/g);if(a&&a[0]){var n=a[0].replace("NetType/","");n=n.replace(/\s/g,"")}}}}}}]);