!function(t){function e(a){if(o[a])return o[a].exports;var n=o[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){function a(t,e){var o=t.data("id"),a=n.opay8.getCookie("openId");$.ajax({type:"get",url:"/cgi/addCoupon",data:{openId:a,couponId:o},success:e})}var n=o(1);n.opay8.setHtmlFonts();new Swiper(".swiper-container",{pagination:".swiper-pagination",slidesPerView:2.3,paginationClickable:!0,freeMode:!0});var i=n.opay8.getQueryString("openId");i&&n.opay8.setCookie("openId",i),$(".swiper-slide").on("click",function(t){t.stopPropagation();var e=$(this);a(e,function(t){var o=JSON.parse(t);0==o.code?(n.opay8.toast("领取成功！"),e.find(".coupon-btn").addClass("YES").removeClass("NO")):n.opay8.toast(o.msg)})}),$(".store-list").on("click",".a-right-btn",function(t){t.stopPropagation();var e=$(this);if(e.hasClass("YES")){var o="http://apis.map.qq.com/tools/routeplan/eword="+e.data("addr")+"?referer=opay8&key=MIRBZ-WCFW6-IBQS5-ERJQD-RAAAS-32FB2";location.href=o}else a(e,function(t){var o=JSON.parse(t);0==o.code?(n.opay8.toast("领取成功！"),e.addClass("YES").removeClass("NO")):n.opay8.toast(o.msg)})});var s=2;$(".get-more-btn").on("click",function(){var t=n.opay8.getCookie("openId");$.ajax({type:"get",url:"/cgi/changeCouponList",data:{page:s,openId:t},success:function(t){s++;var e=JSON.parse(t);if(0==e.code){var o=e.data.pageData;if(o.length>0){var a="";for(var i in o){var r=n.opay8.cutTime(o[i].endTimeStr),c=n.opay8.ifString(o[i].isGet,"NO","立即领取","立即使用"),p=n.opay8.ifString(o[i].isGet,"YES","YES","NO"),d=n.opay8.ifString(o[i].couponType,"DISCOUNT","折扣券","现金券"),l=n.opay8.ifString(o[i].couponType,"DISCOUNT",o[i].amount+"<small>折</small>","<small>￥</small>"+o[i].amount);a+='<a href="javascript:void(0)" data-id="'+o[i].couponId+'"><div class="a-left"><span class="discount">'+l+'</span><span class="couponType">'+d+'</span></div><div class="a-mid"><div class="name">'+o[i].userName+'</div><div class="tips">'+o[i].couponName+'</div></div><div class="a-right"><div class="a-right-btn '+p+'" data-addr="'+o[i].userAddress+'">'+c+'</div><div class="a-right-endtime">效期至'+r+"</div></div></a>"}$(".store-list").append(a)}else n.opay8.toast("暂无更多"),$(".get-more-btn").css({display:"none"})}else n.opay8.toast("请求失败")}})}),$(".bottom-right").on("click",function(){$(".share-mask").css("display","block")}),$(".share-mask").on("click",function(){$(this).css("display","none")})},function(t,e){t.exports={opay8:{setHtmlFonts:function(){var t=document.documentElement.clientWidth;t>640&&(t=640),document.documentElement.style.fontSize=t/7.5+"px"},setCookie:function(t,e,o,a){var n=new Date;return n.setTime(n.getTime()+864e5),document.cookie=t+"="+e+"; expires="+n.toGMTString()+"; "+(a?"path="+a+"; ":"path=/; ")+(o?"domain="+o+";":"domain="+document.location.hostname+";"),!0},getCookie:function(t){var e=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),o=document.cookie.match(e);return o?o[1]:""},delCookie:function(t,e,o){document.cookie=t+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(o?"path="+o+"; ":"path=/; ")+(e?"domain="+e+";":"domain="+document.location.hostname+";")},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(e);return null!=o?o[2]:null},toast:function(t,e){if(null===document.querySelector(".toast")){var o=$('<p class="toast">'+t+"</p>").appendTo($("body"));return setTimeout(function(){o.remove()},e||1e3),o}},cutTime:function(t){return t.split(" ")[0]},ifString:function(t,e,o,a){return t==e?o:a},netType:function(t,e){var o=navigator.userAgent;if(o){var a=o.match(/NetType.*\s/g);if(a&&a[0]){var n=a[0].replace("NetType/","");n=n.replace(/\s/g,"")}}}}}}]);