!function(t){function e(n){if(o[n])return o[n].exports;var a=o[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var o={};e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){function n(t,e){var o=t.data("id"),n=a.opay8.getCookie("openId");$.ajax({type:"get",url:"/cgi/addCoupon",data:{openId:n,couponId:o},success:e})}var a=o(1);a.opay8.setHtmlFonts();new Swiper(".swiper-container",{pagination:".swiper-pagination",slidesPerView:2.3,paginationClickable:!0,freeMode:!0});var i=a.opay8.getQueryString("openId");i&&a.opay8.setCookie("openId",i),$(".swiper-slide").on("click",function(t){t.stopPropagation();var e=$(this);n(e,function(t){var o=JSON.parse(t);0==o.code?(a.opay8.toast("领取成功！"),e.find(".coupon-btn").addClass("YES").removeClass("NO")):a.opay8.toast(o.msg)})}),$(".store-list").on("click","a",function(t){t.stopPropagation();var e=$(this);n(e,function(t){var o=JSON.parse(t);0==o.code?(a.opay8.toast("领取成功！"),e.addClass("YES").removeClass("NO")):a.opay8.toast(o.msg)})});var s=2;$(".changeCouponList").on("click",function(){var t=a.opay8.getCookie("openId");$.ajax({type:"get",url:"/cgi/changeCouponList",data:{page:s,openId:t},success:function(t){s++;var e=JSON.parse(t);if(0==e.code){var o=e.data.pageData;if(o.length>0){var n="";for(var i in o){var r=a.opay8.cutTime(o[i].endTimeStr),c=a.opay8.ifString(o[i].isGet,"NO","点击领取","已领取"),p=a.opay8.ifString(o[i].isGet,"NO","not","has");n+='<a href="javascript:void(0)" data-id="'+o[i].couponId+'"  class="couponlist '+o[i].isGet+'"><div class="title"><span>￥</span>'+o[i].amount+"<i>"+o[i].userName+'</i></div><div class="intro"><p>'+o[i].couponName+'</p></div><div class="dead-line"><p>有效期至'+r+'</p></div><div class="get-btn" >'+c+'<span><img src="images/other_business_voucher_bg_'+p+'_arrow@3x.png" alt=""></span></div></a>'}$(".store-list").empty().append(n),o.length<6&&(s=1)}else a.opay8.toast("暂无更多")}else a.opay8.toast("请求失败")}})}),$(".bottom-right").on("click",function(){$(".share-mask").css("display","block")}),$(".share-mask").on("click",function(){$(this).css("display","none")})},function(t,e){t.exports={opay8:{setHtmlFonts:function(){var t=document.documentElement.clientWidth;t>640&&(t=640),document.documentElement.style.fontSize=t/7.5+"px"},setCookie:function(t,e,o,n){var a=new Date;return a.setTime(a.getTime()+864e5),document.cookie=t+"="+e+"; expires="+a.toGMTString()+"; "+(n?"path="+n+"; ":"path=/; ")+(o?"domain="+o+";":"domain="+document.location.hostname+";"),!0},getCookie:function(t){var e=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),o=document.cookie.match(e);return o?o[1]:""},delCookie:function(t,e,o){document.cookie=t+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(o?"path="+o+"; ":"path=/; ")+(e?"domain="+e+";":"domain="+document.location.hostname+";")},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(e);return null!=o?o[2]:null},toast:function(t,e){if(null===document.querySelector(".toast")){var o=$('<p class="toast">'+t+"</p>").appendTo($("body"));return setTimeout(function(){o.remove()},e||1e3),o}},cutTime:function(t){return t.split(" ")[0]},ifString:function(t,e,o,n){return t==e?o:n},netType:function(t,e){var o=navigator.userAgent;if(o){var n=o.match(/NetType.*\s/g);if(n&&n[0]){var a=n[0].replace("NetType/","");a=a.replace(/\s/g,"")}}}}}}]);